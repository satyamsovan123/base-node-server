<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>base-frontend documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	   <link rel="stylesheet" href="../styles/style.css">
        <link rel="stylesheet" href="../styles/dark.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top d-block d-sm-none">
            <a href="../" class="navbar-brand">base-frontend documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content injectable">
                   <div class="content-data">








<ol class="breadcrumb">
  <li class="breadcrumb-item">Injectables</li>
  <li class="breadcrumb-item" >CommonService</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="nav-item">
            <a href="#info" 
                class="nav-link"
                class="nav-link active"
                role="tab" id="info-tab" data-bs-toggle="tab" data-link="info">Info</a>
        </li>
        <li class="nav-item">
            <a href="#source" 
                class="nav-link"
                
                role="tab" id="source-tab" data-bs-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/app/services/common.service.ts</code>
        </p>


            <p class="comment">
                <h3>Description</h3>
            </p>
            <p class="comment">
                <p>This is the common service. It has the methods and shared observables that are used throughout the application. Therefore, it is injected in the <a href="../modules/AppModule.html">app.module.ts</a> file.</p>

            </p>



            <section data-compodoc="block-index">
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>
                <tr>
                    <td class="col-md-4">
                        <h6><b>Properties</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                <a href="#loaderSubject" >loaderSubject</a>
                            </li>
                            <li>
                                <a href="#loaderSubject$" >loaderSubject$</a>
                            </li>
                            <li>
                                <a href="#loggedInUserSubject" >loggedInUserSubject</a>
                            </li>
                            <li>
                                <a href="#loggedInUserSubject$" >loggedInUserSubject$</a>
                            </li>
                            <li>
                                <a href="#notificationSubject" >notificationSubject</a>
                            </li>
                            <li>
                                <a href="#notificationSubject$" >notificationSubject$</a>
                            </li>
                        </ul>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methods</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                <a href="#checkSavedCredentials" >checkSavedCredentials</a>
                            </li>
                            <li>
                                <a href="#decodeToken" >decodeToken</a>
                            </li>
                            <li>
                                <a href="#logger" >logger</a>
                            </li>
                            <li>
                                <a href="#signOut" >signOut</a>
                            </li>
                            <li>
                                <a href="#updateLoaderSubject" >updateLoaderSubject</a>
                            </li>
                            <li>
                                <a href="#updateLoggedInUserSubject" >updateLoggedInUserSubject</a>
                            </li>
                            <li>
                                <a href="#updateNotificationSubject" >updateNotificationSubject</a>
                            </li>
                        </ul>
                    </td>
                </tr>





                    <tr>
                        <td class="col-md-4">
                            <h6><b>Accessors</b></h6>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <ul class="index-list">
                                <li>
                                    <a href="#token" >token</a>
                                </li>
                                <li>
                                    <a href="#username" >username</a>
                                </li>
                            </ul>
                        </td>
                    </tr>
        </tbody>
    </table>
</section>

            <section data-compodoc="block-constructor">
    <h3 id="constructor">Constructor</h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
<code>constructor(router: Router, backendService: <a href="../injectables/BackendService.html" target="_self">BackendService</a>)</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="14" class="link-to-prism">src/app/services/common.service.ts:14</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>This is the constructor of the <a href="../injectables/CommonService.html">CommonService</a> class.</p>
</div>
                            <div>
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                                    <td>Description</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>router</td>
                                                  
                                                        <td>
                                                                    <code>Router</code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                        <td>
                                                                <p>is used to navigate the user to different pages.</p>

                                                        </td>
                                                </tr>
                                                <tr>
                                                        <td>backendService</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/BackendService.html" target="_self" >BackendService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                        <td>
                                                                <p>is used to call the backend APIs.</p>

                                                        </td>
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
</section>

            <section data-compodoc="block-methods">
    
    <h3 id="methods">
        Methods
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="checkSavedCredentials"></a>
                    <span class="name">
                        <span ><b>checkSavedCredentials</b></span>
                        <a href="#checkSavedCredentials"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>checkSavedCredentials()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="207"
                            class="link-to-prism">src/app/services/common.service.ts:207</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>This method is used to check if the user has already signed in. It will check if the token and username are present in the session storage. If they are present, it will set the <a href="token">token</a> and <a href="username">username</a>.
For additional security, it will also check if the username in the token matches the username in the session storage. If they do not match, it will call the <a href="signOut">signOut</a> method.
It will try to decode the token. If an error occurs while decoding the token, it will call the <a href="signOut">signOut</a> method.</p>
</div>

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="decodeToken"></a>
                    <span class="name">
                        <span ><b>decodeToken</b></span>
                        <a href="#decodeToken"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>decodeToken(token: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="152"
                            class="link-to-prism">src/app/services/common.service.ts:152</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>This method is used to decode the JWT. It will return the decoded JWT. If the token is empty, it will return default response. If while decoding the JWT, an error occurs, it will call the <a href="signOut">signOut</a> method and return default response.</p>
<div><pre class="line-numbers"><code class="language-html">decodeToken(jwt);</code></pre></div></div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>token</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>is the JWT to be decoded.</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                        <b>Example :</b>
                        <div>
                            <pre class="line-numbers"><code class="language-html">decodeToken(jwt);</code></pre>
                        </div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../interfaces/decodedJWT.html" target="_self" >decodedJWT</a></code>

                    </div>
                    <div class="io-description">
                        <p>the decoded JWT.</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="logger"></a>
                    <span class="name">
                        <span ><b>logger</b></span>
                        <a href="#logger"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>logger(message: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="248"
                            class="link-to-prism">src/app/services/common.service.ts:248</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>This method is used to log messages to the console. It will not log anything in production mode. It will also not log anything if the message is empty.</p>
<div><pre class="line-numbers"><code class="language-html">logger(`Something happened.`); // This will log &#39;Something happened.&#39; to the console.</code></pre></div></div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>message</td>
                                    <td>
                                                <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>is the message to be logged.</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                        <b>Example :</b>
                        <div>
                            <pre class="line-numbers"><code class="language-html">logger(&lt;code&gt;Something happened.&lt;/code&gt;); // This will log &amp;#39;Something happened.&amp;#39; to the console.</code></pre>
                        </div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="signOut"></a>
                    <span class="name">
                        <span ><b>signOut</b></span>
                        <a href="#signOut"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>signOut()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="113"
                            class="link-to-prism">src/app/services/common.service.ts:113</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>This method is used to sign out the signed in user. It will call the <a href="../injectables/BackendService.html#handleSignOut">handleSignOut</a> method. It will also clear the token and username from the session storage. After that, it will navigate the user to the sign in page.</p>
</div>

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="updateLoaderSubject"></a>
                    <span class="name">
                        <span ><b>updateLoaderSubject</b></span>
                        <a href="#updateLoaderSubject"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>updateLoaderSubject(loaderState: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank">boolean</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="38"
                            class="link-to-prism">src/app/services/common.service.ts:38</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>This method is used to update the <a href="loaderSubject">loaderSubject</a>. It will update the <a href="loaderSubject">loaderSubject</a> with the value of the <code>loaderState</code> parameter.</p>
<div><pre class="line-numbers"><code class="language-html">updateLoaderSubject(true); // This will update the loaderSubject with true.</code></pre></div></div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>loaderState</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>is the state of the loader.</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                        <b>Example :</b>
                        <div>
                            <pre class="line-numbers"><code class="language-html">updateLoaderSubject(true); // This will update the loaderSubject with true.</code></pre>
                        </div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="updateLoggedInUserSubject"></a>
                    <span class="name">
                        <span ><b>updateLoggedInUserSubject</b></span>
                        <a href="#updateLoggedInUserSubject"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>updateLoggedInUserSubject(loggedInUser: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="90"
                            class="link-to-prism">src/app/services/common.service.ts:90</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>This method is used to update the <a href="loggedInUserSubject">loggedInUserSubject</a>. It will update the <a href="loggedInUserSubject">loggedInUserSubject</a> with the value of the <code>loggedInUser</code> parameter.</p>
<div><pre class="line-numbers"><code class="language-html">updateLoggedInUserSubject(`John Doe`); // This will update the loggedInUserSubject with &#39;John Doe&#39;.</code></pre></div></div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>loggedInUser</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>is the logged in user&#39;s name which is to be shown on the screen.</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                        <b>Example :</b>
                        <div>
                            <pre class="line-numbers"><code class="language-html">updateLoggedInUserSubject(&lt;code&gt;John Doe&lt;/code&gt;); // This will update the loggedInUserSubject with &amp;#39;John Doe&amp;#39;.</code></pre>
                        </div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="updateNotificationSubject"></a>
                    <span class="name">
                        <span ><b>updateNotificationSubject</b></span>
                        <a href="#updateNotificationSubject"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>updateNotificationSubject(notification: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="64"
                            class="link-to-prism">src/app/services/common.service.ts:64</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>This method is used to update the <a href="notificationSubject">notificationSubject</a>. It will update the <a href="notificationSubject">notificationSubject</a> with the value of the <code>notification</code> parameter.</p>
<div><pre class="line-numbers"><code class="language-html">updateNotificationSubject(`Hello world!`); // This will update the notificationSubject with &#39;Hello world!&#39;.</code></pre></div></div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>notification</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>is the notification to be shown on the screen.</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                        <b>Example :</b>
                        <div>
                            <pre class="line-numbers"><code class="language-html">updateNotificationSubject(&lt;code&gt;Hello world!&lt;/code&gt;); // This will update the notificationSubject with &amp;#39;Hello world!&amp;#39;.</code></pre>
                        </div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</section>
            <section data-compodoc="block-properties">
    
    <h3 id="inputs">
        Properties
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="loaderSubject"></a>
                    <span class="name">
                        <span ><b>loaderSubject</b></span>
                        <a href="#loaderSubject"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>BehaviorSubject&lt;boolean&gt;</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>new BehaviorSubject&lt;boolean&gt;(false)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="26" class="link-to-prism">src/app/services/common.service.ts:26</a></div>
                        </td>
                    </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>This is the loader subject. It is used to show the loader on the screen. It is initialized with <code>false</code>.</p>
</div>
                </td>
            </tr>

        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="loaderSubject$"></a>
                    <span class="name">
                        <span ><b>loaderSubject$</b></span>
                        <a href="#loaderSubject$"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>this.loaderSubject.asObservable()</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="30" class="link-to-prism">src/app/services/common.service.ts:30</a></div>
                        </td>
                    </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>This is the loader subject observable. This is used to subscribe to the <a href="loaderSubject">loaderSubject</a>.</p>
</div>
                </td>
            </tr>

        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="loggedInUserSubject"></a>
                    <span class="name">
                        <span ><b>loggedInUserSubject</b></span>
                        <a href="#loggedInUserSubject"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>BehaviorSubject&lt;string&gt;</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>new BehaviorSubject&lt;string&gt;(
    &#x27;&#x27;
  )</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="76" class="link-to-prism">src/app/services/common.service.ts:76</a></div>
                        </td>
                    </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>This is the logged in user subject. It is used to show the logged in user&#39;s name on the screen. It is initialized with an empty string.</p>
<div><pre class="line-numbers"><code class="language-html">loggedInUserSubject.subscribe((loggedInUser: string) =&gt; {
// Do something with the logged in user name.
});</code></pre></div></div>
                </td>
            </tr>

        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="loggedInUserSubject$"></a>
                    <span class="name">
                        <span ><b>loggedInUserSubject$</b></span>
                        <a href="#loggedInUserSubject$"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>this.loggedInUserSubject.asObservable()</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="82" class="link-to-prism">src/app/services/common.service.ts:82</a></div>
                        </td>
                    </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>This is the logged in user subject observable. This is used to subscribe to the <a href="loggedInUserSubject">loggedInUserSubject</a>.</p>
</div>
                </td>
            </tr>

        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="notificationSubject"></a>
                    <span class="name">
                        <span ><b>notificationSubject</b></span>
                        <a href="#notificationSubject"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>BehaviorSubject&lt;string&gt;</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>new BehaviorSubject&lt;string&gt;(
    &#x27;&#x27;
  )</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="50" class="link-to-prism">src/app/services/common.service.ts:50</a></div>
                        </td>
                    </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>This is the notification subject. It is used to show the notification on the screen. It is initialized with an empty string.</p>
<div><pre class="line-numbers"><code class="language-html">notificationSubject.subscribe((notification: string) =&gt; {
 // Do something with the notification.
});</code></pre></div></div>
                </td>
            </tr>

        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="notificationSubject$"></a>
                    <span class="name">
                        <span ><b>notificationSubject$</b></span>
                        <a href="#notificationSubject$"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>this.notificationSubject.asObservable()</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="56" class="link-to-prism">src/app/services/common.service.ts:56</a></div>
                        </td>
                    </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>This is the notification subject observable. This is used to subscribe to the <a href="notificationSubject">notificationSubject</a>.</p>
</div>
                </td>
            </tr>

        </tbody>
    </table>
</section>

            <section data-compodoc="block-accessors">
    <h3 id="accessors">
        Accessors
    </h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="token"></a>
                        <span class="name"><b>token</b><a href="#token"><span class="icon ion-ios-link"></span></a></span>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <span class="accessor"><b>get</b><code>token()</code></span>
                    </td>
                </tr>
                            <tr>
                                <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="106" class="link-to-prism">src/app/services/common.service.ts:106</a></div>
                                </td>
                            </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description"><p>This is used to get the token from the session storage. If the token is not present in the session storage, it will return an empty string.</p>
</div>

                                <div>
                                </div>
                                <div class="io-description">
                                    <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                                </div>
                        </td>
                    </tr>

                <tr>
                    <td class="col-md-4">
                        <span class="accessor"><b>set</b><code>token(token: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code></span>
                    </td>
                </tr>
                            <tr>
                                <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="98" class="link-to-prism">src/app/services/common.service.ts:98</a></div>
                                </td>
                            </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description"><p>This is used to set the token in the session storage.</p>
</div>

                                <div class="io-description">
                                        <b>Parameters :</b>
                                        <table class="params">
                                            <thead>
                                                <tr>
                                                    <td>Name</td>
                                                        <td>Type</td>
                                                    <td>Optional</td>
                                                        <td>Description</td>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                    <tr>
                                                            <td>token</td>
                                                    
                                                            <td>
                                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                                            </td>
                                                    
                                                        <td>
                                                                No
                                                        </td>
                                                        
                                                            <td>
                                                                    <p>is the token to be set.</p>

                                                            </td>
                                                    </tr>
                                            </tbody>
                                        </table>
                                </div>
                                <div>
                                </div>
                                <div class="io-description">
                                    <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                                </div>
                        </td>
                    </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="username"></a>
                        <span class="name"><b>username</b><a href="#username"><span class="icon ion-ios-link"></span></a></span>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <span class="accessor"><b>get</b><code>username()</code></span>
                    </td>
                </tr>
                            <tr>
                                <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="198" class="link-to-prism">src/app/services/common.service.ts:198</a></div>
                                </td>
                            </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description"><p>This is used to get the username from the session storage. If the username is not present in the session storage, it will return an empty string.</p>
</div>

                                <div>
                                </div>
                                <div class="io-description">
                                    <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                                </div>
                        </td>
                    </tr>

                <tr>
                    <td class="col-md-4">
                        <span class="accessor"><b>set</b><code>username(username: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code></span>
                    </td>
                </tr>
                            <tr>
                                <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="189" class="link-to-prism">src/app/services/common.service.ts:189</a></div>
                                </td>
                            </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description"><p>This is used to set the username in the session storage. It will also update the <a href="loggedInUserSubject">loggedInUserSubject</a>.</p>
</div>

                                <div class="io-description">
                                        <b>Parameters :</b>
                                        <table class="params">
                                            <thead>
                                                <tr>
                                                    <td>Name</td>
                                                        <td>Type</td>
                                                    <td>Optional</td>
                                                        <td>Description</td>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                    <tr>
                                                            <td>username</td>
                                                    
                                                            <td>
                                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                                            </td>
                                                    
                                                        <td>
                                                                No
                                                        </td>
                                                        
                                                            <td>
                                                                    <p>is the username to be set.</p>

                                                            </td>
                                                    </tr>
                                            </tbody>
                                        </table>
                                </div>
                                <div>
                                </div>
                                <div class="io-description">
                                    <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                                </div>
                        </td>
                    </tr>
            </tbody>
        </table>
</section>
    </div>


    <div class="tab-pane fade  tab-source-code" id="source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { Injectable } from &#x27;@angular/core&#x27;;
import { BehaviorSubject, finalize } from &#x27;rxjs&#x27;;
import { Router } from &#x27;@angular/router&#x27;;
import { BackendService } from &#x27;./backend.service&#x27;;
import { environment } from &#x27;src/environments/environment&#x27;;
import { decodedJWT } from &#x27;../models/decodedJWT.model&#x27;;

/**
 * This is the common service. It has the methods and shared observables that are used throughout the application. Therefore, it is injected in the [app.module.ts]{@link AppModule} file.
 */
@Injectable({
  providedIn: &#x27;root&#x27;,
})
export class CommonService {
  /**
   * This is the constructor of the [CommonService]{@link CommonService} class.
   * @param {Router} router is used to navigate the user to different pages.
   * @param {BackendService} backendService is used to call the backend APIs.
   */
  constructor(private router: Router, private backendService: BackendService) {}

  /**
   * This is the loader subject. It is used to show the loader on the screen. It is initialized with &#x60;false&#x60;.
   * @type {BehaviorSubject&lt;boolean&gt;}
   */
  loaderSubject: BehaviorSubject&lt;boolean&gt; &#x3D; new BehaviorSubject&lt;boolean&gt;(false);
  /**
   * This is the loader subject observable. This is used to subscribe to the [loaderSubject]{@link loaderSubject}.
   */
  loaderSubject$ &#x3D; this.loaderSubject.asObservable();

  /**
   * This method is used to update the [loaderSubject]{@link loaderSubject}. It will update the [loaderSubject]{@link loaderSubject} with the value of the &#x60;loaderState&#x60; parameter.
   * @param {boolean} loaderState is the state of the loader.
   * @example
   * updateLoaderSubject(true); // This will update the loaderSubject with true.
   */
  updateLoaderSubject(loaderState: boolean) {
    this.loaderSubject.next(loaderState);
  }

  /**
   * This is the notification subject. It is used to show the notification on the screen. It is initialized with an empty string.
   * @type {BehaviorSubject&lt;string&gt;}
   * @example
   * notificationSubject.subscribe((notification: string) &#x3D;&gt; {
   *  // Do something with the notification.
   * });
   */
  notificationSubject: BehaviorSubject&lt;string&gt; &#x3D; new BehaviorSubject&lt;string&gt;(
    &#x27;&#x27;
  );
  /**
   * This is the notification subject observable. This is used to subscribe to the [notificationSubject]{@link notificationSubject}.
   */
  notificationSubject$ &#x3D; this.notificationSubject.asObservable();

  /**
   * This method is used to update the [notificationSubject]{@link notificationSubject}. It will update the [notificationSubject]{@link notificationSubject} with the value of the &#x60;notification&#x60; parameter.
   * @param {string} notification is the notification to be shown on the screen.
   * @example
   * updateNotificationSubject(&#x60;Hello world!&#x60;); // This will update the notificationSubject with &#x27;Hello world!&#x27;.
   */
  updateNotificationSubject(notification: string) {
    this.notificationSubject.next(notification);
  }

  /**
   * This is the logged in user subject. It is used to show the logged in user&#x27;s name on the screen. It is initialized with an empty string.
   * @type {BehaviorSubject&lt;string&gt;}
   * @example
   * loggedInUserSubject.subscribe((loggedInUser: string) &#x3D;&gt; {
   * // Do something with the logged in user name.
   * });
   */
  loggedInUserSubject: BehaviorSubject&lt;string&gt; &#x3D; new BehaviorSubject&lt;string&gt;(
    &#x27;&#x27;
  );
  /**
   * This is the logged in user subject observable. This is used to subscribe to the [loggedInUserSubject]{@link loggedInUserSubject}.
   */
  loggedInUserSubject$ &#x3D; this.loggedInUserSubject.asObservable();

  /**
   * This method is used to update the [loggedInUserSubject]{@link loggedInUserSubject}. It will update the [loggedInUserSubject]{@link loggedInUserSubject} with the value of the &#x60;loggedInUser&#x60; parameter.
   * @param {string} loggedInUser is the logged in user&#x27;s name which is to be shown on the screen.
   * @example
   * updateLoggedInUserSubject(&#x60;John Doe&#x60;); // This will update the loggedInUserSubject with &#x27;John Doe&#x27;.
   */
  updateLoggedInUserSubject(loggedInUser: string) {
    this.loggedInUserSubject.next(loggedInUser);
  }

  /**
   * This is used to set the token in the session storage.
   * @param {string} token is the token to be set.
   */
  set token(token: string) {
    sessionStorage.setItem(&#x27;Authorization&#x27;, token);
  }

  /**
   * This is used to get the token from the session storage. If the token is not present in the session storage, it will return an empty string.
   * @type {string}
   */
  get token(): string {
    return sessionStorage.getItem(&#x27;Authorization&#x27;) || &#x27;&#x27;;
  }

  /**
   * This method is used to sign out the signed in user. It will call the [handleSignOut]{@link BackendService#handleSignOut} method. It will also clear the token and username from the session storage. After that, it will navigate the user to the sign in page.
   */
  signOut() {
    /**
     * Resetting the token and username.
     */
    this.updateLoaderSubject(true);
    this.token &#x3D; &#x27;&#x27;;
    this.username &#x3D; &#x27;&#x27;;
    sessionStorage.removeItem(&#x27;Authorization&#x27;);
    sessionStorage.removeItem(&#x27;username&#x27;);

    /**
     * Calling the [handleSignOut]{@link handleSignOut} method of the [backendService]{@link BackendService}. If the sign out is successful, it will update the [notificationSubject]{@link notificationSubject} with the message from the response. If an error occurs, it will update the [notificationSubject]{@link notificationSubject} with the error message.
     */
    this.backendService
      .handleSignOut()
      .pipe(
        finalize(() &#x3D;&gt; {
          this.updateLoaderSubject(false);
          this.router.navigate([&#x27;/signin&#x27;]);
        })
      )
      .subscribe({
        next: (response: any) &#x3D;&gt; {
          this.updateNotificationSubject(response?.body?.message || &#x27;Success&#x27;);
        },
        error: (error: any) &#x3D;&gt; {
          this.logger(error);
          this.updateNotificationSubject(error.error?.message || &#x27;Error&#x27;);
        },
      });
  }

  /**
   * This method is used to decode the JWT. It will return the decoded JWT. If the token is empty, it will return default response. If while decoding the JWT, an error occurs, it will call the [signOut]{@link signOut} method and return default response.
   * @param token is the JWT to be decoded.
   * @example
   * decodeToken(jwt);
   * @returns { decodedJWT } the decoded JWT.
   */
  decodeToken(token: string): decodedJWT {
    /**
     * This is the default response. It will be returned if the token is empty or if an error occurs while decoding the JWT.
     * @type { decodedJWT }
     */
    let response: decodedJWT &#x3D; {
      exp: 0,
      iat: 0,
      username: &#x27;&#x27;,
    };

    /**
     * If the token is empty, returning the default response.
     */
    if (!token) {
      return response;
    }
    /**
     * Trying to decode the JWT. If an error occurs, calling the [signOut]{@link signOut} method and returning the default response.
     */
    try {
      const jwtPayload: string &#x3D; token.split(&#x27;.&#x27;)[1];
      const base64: string &#x3D; jwtPayload.replace(/-/g, &#x27;+&#x27;).replace(/_/g, &#x27;/&#x27;);
      const decodedPayload: any &#x3D; JSON.parse(atob(base64));
      response &#x3D; decodedPayload;
      return decodedPayload;
    } catch (error) {
      this.signOut();
      this.logger(error);
      return response;
    }
  }

  /**
   * This is used to set the username in the session storage. It will also update the [loggedInUserSubject]{@link loggedInUserSubject}.
   * @param {string} username is the username to be set.
   */
  set username(username: string) {
    this.updateLoggedInUserSubject(username);
    sessionStorage.setItem(&#x27;username&#x27;, username);
  }

  /**
   * This is used to get the username from the session storage. If the username is not present in the session storage, it will return an empty string.
   * @type {string}
   */
  get username(): string {
    return sessionStorage.getItem(&#x27;username&#x27;) || &#x27;&#x27;;
  }

  /**
   * This method is used to check if the user has already signed in. It will check if the token and username are present in the session storage. If they are present, it will set the [token]{@link token} and [username]{@link username}.
   * For additional security, it will also check if the username in the token matches the username in the session storage. If they do not match, it will call the [signOut]{@link signOut} method.
   * It will try to decode the token. If an error occurs while decoding the token, it will call the [signOut]{@link signOut} method.
   */
  checkSavedCredentials() {
    try {
      const sessionStorageToken &#x3D; sessionStorage.getItem(&#x27;Authorization&#x27;);
      const sessionStorageUsername &#x3D; sessionStorage.getItem(&#x27;username&#x27;);

      const decodedToken: decodedJWT &#x3D; this.decodeToken(
        sessionStorageToken || &#x27;&#x27;
      );

      /**
       * If the decoded token has username as empty, calling the [signOut]{@link signOut} method.
       * If the username in the token does not match the username in the session storage, calling the [signOut]{@link signOut} method.
       */
      if (
        !decodedToken.username ||
        (decodedToken.username &amp;&amp;
          decodedToken.username !&#x3D;&#x3D; sessionStorageUsername)
      ) {
        this.signOut();
        return;
      }

      /**
       * If the token and username are present in the session storage, setting the [token]{@link token} and [username]{@link username}. This would handle the case when the user has already signed in and has not signed out i.e the user has closed the browser tab and opened the application again or the user has refreshed the page.
       */
      if (sessionStorageToken &amp;&amp; sessionStorageUsername) {
        this.token &#x3D; sessionStorageToken;
        this.username &#x3D; sessionStorageUsername;
      }
    } catch (error) {
      this.signOut();
      this.logger(error);
    }
  }

  /**
   * This method is used to log messages to the console. It will not log anything in production mode. It will also not log anything if the message is empty.
   * @param {any} message is the message to be logged.
   * @example
   * logger(&#x60;Something happened.&#x60;); // This will log &#x27;Something happened.&#x27; to the console.
   */
  logger(message: any) {
    if (environment.production || !message) {
      return;
    }
    console.log(message);
  }
}
</code></pre>
    </div>

</div>













                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

          <label class="dark-mode-switch">
               <input type="checkbox">
               <span class="slider">
                    <svg class="slider-icon" viewBox="0 0 24 24" fill="none" height="20" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" width="20" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path>
                    </svg>
               </span>
          </label>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'injectable';
            var COMPODOC_CURRENT_PAGE_URL = 'CommonService.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>

       <script src="../js/menu-wc.js" defer></script>
       <script nomodule src="../js/menu-wc_es5.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
